<!doctype html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <title>Calcul calories | Be Healthy</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <nav class="navbar navbar-dark fixed-top custom-nav">
      <div class="container">
        <a class="navbar-brand logo" href="acceuil.html">ðŸ¥— Be Healthy</a>
      </div>
    </nav>

    <div class="container page animate">
      <h2 class="text-center mb-4">Analyse Alimentaire</h2>

      <div class="card p-4">
        <input
          type="text"
          id="food"
          class="form-control mb-3"
          placeholder="Nom de l'aliment"
        />
        <input
          type="number"
          id="weight"
          class="form-control mb-3"
          placeholder="Poids (grammes)"
        />

        <button class="btn btn-success w-100" onclick="calculer()">
          Analyser
        </button>
      </div>
    </div>

    <footer>Be Healthy | Calcul calories</footer>

    <script>
      function calculer() {
        let food = document.getElementById("food").value;
        let weight = parseFloat(document.getElementById("weight").value);
        let maladie = document.getElementById("maladie").value;

        if (food == "" || isNaN(weight) || weight <= 0) {
          alert("Remplissez tous les champs correctement!");
          return;
        }

        let baseCalories = 0,
          baseProtein = 0,
          baseFats = 0,
          baseSugar = 0;
        switch (food.toLowerCase()) {
          case "riz":
            baseCalories = 130;
            baseProtein = 2.7;
            baseFats = 0.3;
            baseSugar = 0.2;
            break;
          case "poulet":
            baseCalories = 240;
            baseProtein = 27;
            baseFats = 14;
            baseSugar = 0;
            break;
          case "pain":
            baseCalories = 260;
            baseProtein = 9;
            baseFats = 3;
            baseSugar = 5;
            break;
          case "lait":
            baseCalories = 64;
            baseProtein = 3.3;
            baseFats = 3.4;
            baseSugar = 5;
            break;
          case "boeuf":
            baseCalories = 250;
            baseProtein = 26;
            baseFats = 20;
            baseSugar = 0;
            break;
          default:
            baseCalories = 200;
            baseProtein = 15;
            baseFats = 10;
            baseSugar = 2;
            break;
        }

        let multiplier = weight / 100;
        let calories = (baseCalories * multiplier).toFixed(1);
        let protein = (baseProtein * multiplier).toFixed(1);
        let fats = (baseFats * multiplier).toFixed(1);
        let sugar = (baseSugar * multiplier).toFixed(1);

        localStorage.setItem("food", food);
        localStorage.setItem("weight", weight);
        localStorage.setItem("calories", calories);
        localStorage.setItem("protein", protein);
        localStorage.setItem("fats", fats);
        localStorage.setItem("sugar", sugar);
        localStorage.setItem("maladie", maladie);

        window.location = "nutrition.html";
      }
    </script>
    <script src="transition.js"></script>
  </body>
</html>
